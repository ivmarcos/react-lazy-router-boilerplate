{"version":3,"sources":["../../src/evaluators/TryStatement.js"],"names":["ast","strictCode","env","realm","completions","blockRes","evaluateCompletion","block","handler","unshift","finalizer","completion","shift","intrinsics","undefined","Error"],"mappings":";;;;;;kBAmBe,UAAUA,GAAV,EAAsCC,UAAtC,EAA2DC,GAA3D,EAAoFC,KAApF,EAAqH;AAClI,MAAIC,cAAc,EAAlB;;AAEA,MAAIC,WAAWH,IAAII,kBAAJ,CAAuBN,IAAIO,KAA3B,EAAkCN,UAAlC,CAAf;;AAEA;AACA,MAAII,6DAAJ,EAAsD,MAAMA,QAAN;;AAEtD,MAAIA,oDAAuCL,IAAIQ,OAA/C,EAAwD;AACtDJ,gBAAYK,OAAZ,CAAoBP,IAAII,kBAAJ,CAAuBN,IAAIQ,OAA3B,EAAoCP,UAApC,EAAgDI,QAAhD,CAApB;AACD,GAFD,MAEO;AACLD,gBAAYK,OAAZ,CAAoBJ,QAApB;AACD;;AAED,MAAIL,IAAIU,SAAR,EAAmB;AACjBN,gBAAYK,OAAZ,CAAoBP,IAAII,kBAAJ,CAAuBN,IAAIU,SAA3B,EAAsCT,UAAtC,CAApB;AACD;;AAED;AAlBkI;AAAA;AAAA;;AAAA;AAmBlI,yBAAuBG,WAAvB,8HAAoC;AAAA,UAA3BO,UAA2B;;AAClC,UAAIA,cAAcA,mDAAlB,EAA0D,MAAMA,UAAN;AAC3D;AArBiI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAuBlI,MAAIX,IAAIU,SAAR,EAAmB;AACjBN,gBAAYQ,KAAZ;AACD;;AAED;AA3BkI;AAAA;AAAA;;AAAA;AA4BlI,0BAAuBR,WAAvB,mIAAoC;AAAA,UAA3BO,WAA2B;;AAClC,UAAIA,eAAcA,oCAAlB,EACE,OAAQ,wBAAYR,KAAZ,EAAmBQ,WAAnB,EAA+BR,MAAMU,UAAN,CAAiBC,SAAhD,CAAR;AACH;AA/BiI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAiClI,QAAM,IAAIC,KAAJ,CAAU,+BAAV,CAAN;AACD,C;;AAvCD;;AACA;;AACA","file":"TryStatement.js","sourcesContent":["/**\n * Copyright (c) 2017-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\n\nimport type { Realm } from \"../realm.js\";\nimport type { LexicalEnvironment } from \"../environment.js\";\nimport type { Reference } from \"../environment.js\";\nimport { AbruptCompletion, IntrospectionThrowCompletion, ThrowCompletion } from \"../completions.js\";\nimport { UpdateEmpty } from \"../methods/index.js\";\nimport { Value } from \"../values/index.js\";\nimport type { BabelNodeTryStatement } from \"babel-types\";\n\nexport default function (ast: BabelNodeTryStatement, strictCode: boolean, env: LexicalEnvironment, realm: Realm): Value | Reference {\n  let completions = [];\n\n  let blockRes = env.evaluateCompletion(ast.block, strictCode);\n\n  // can't catch or run finally clauses on introspection errors\n  if (blockRes instanceof IntrospectionThrowCompletion) throw blockRes;\n\n  if (blockRes instanceof ThrowCompletion && ast.handler) {\n    completions.unshift(env.evaluateCompletion(ast.handler, strictCode, blockRes));\n  } else {\n    completions.unshift(blockRes);\n  }\n\n  if (ast.finalizer) {\n    completions.unshift(env.evaluateCompletion(ast.finalizer, strictCode));\n  }\n\n  // use the last completion record\n  for (let completion of completions) {\n    if (completion && completion instanceof AbruptCompletion) throw completion;\n  }\n\n  if (ast.finalizer) {\n    completions.shift();\n  }\n\n  // otherwise use the last returned value\n  for (let completion of completions) {\n    if (completion && completion instanceof Value)\n      return (UpdateEmpty(realm, completion, realm.intrinsics.undefined): any);\n  }\n\n  throw new Error(\"shouldn't meet this condition\");\n}\n"]}