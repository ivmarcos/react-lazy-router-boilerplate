!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("inferno"),require("inferno-component")):"function"==typeof define&&define.amd?define(["inferno","inferno-component"],n):e.InfernoTransitionGroup=n(e.inferno,e.Component)}(this,function(e,n){function t(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function r(e,n){var t=e.key;return null===t||void 0===t?n:t}function o(e){for(var n={},t=0;t<e.length;t++){n[r(e[t],t.toString(36))]=e[t]}return n}function i(e,n){e=e||{},n=n||{};var t=function(t){return n.hasOwnProperty(t)?n[t]:e[t]},r={},o=[];for(var i in e)n.hasOwnProperty(i)?o.length&&(r[i]=o,o=[]):o.push(i);var a={};for(var s in n){if(r.hasOwnProperty(s))for(var p=0;p<r[s].length;p++){var c=r[s][p];a[r[s][p]]=t(c)}a[s]=t(s)}for(var f=0;f<o.length;f++)a[o[f]]=t(o[f]);return a}function a(e,n){var t={};for(var r in e)n.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function s(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function p(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function c(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}n="default"in n?n.default:n;var f=function(e){return e},h=function(n){function r(){var e,t,i;s(this,r);for(var a=arguments.length,c=Array(a),f=0;f<a;f++)c[f]=arguments[f];return e=t=p(this,n.call.apply(n,[this].concat(c))),t.refs={},t.state={children:o(t.props.children||[])},t.performEnter=function(e){t.currentlyTransitioningKeys[e]=!0;var n=t.refs[e];n.componentWillEnter?n.componentWillEnter(t._handleDoneEntering.bind(t,e)):t._handleDoneEntering(e)},t.performLeave=function(e){t.currentlyTransitioningKeys[e]=!0;var n=t.refs[e];n.componentWillLeave?n.componentWillLeave(t._handleDoneLeaving.bind(t,e)):t._handleDoneLeaving(e)},i=e,p(t,i)}return c(r,n),r.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},r.prototype.componentDidMount=function(){var e=this.state.children;for(var n in e)e[n]&&this.performAppear(n)},r.prototype.componentWillReceiveProps=function(e){var n=o(e.children||[]),t=this.state.children;this.setState({children:i(t,n)});var r=void 0;for(r in n)if(n.hasOwnProperty(r)){var a=t&&t.hasOwnProperty(r);!n[r]||a||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(r in t)if(t.hasOwnProperty(r)){var s=n&&n.hasOwnProperty(r);!t[r]||s||this.currentlyTransitioningKeys[r]||this.keysToLeave.push(r)}},r.prototype.componentDidUpdate=function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var n=this.keysToLeave;this.keysToLeave=[],n.forEach(this.performLeave)},r.prototype.performAppear=function(e){this.currentlyTransitioningKeys[e]=!0;var n=this.refs[e];n.componentWillAppear?n.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)},r.prototype._handleDoneAppearing=function(e){var n=this.refs[e];n.componentDidAppear&&n.componentDidAppear(),delete this.currentlyTransitioningKeys[e];var t=o(this.props.children||[]);t&&t.hasOwnProperty(e)||this.performLeave(e)},r.prototype._handleDoneEntering=function(e){var n=this.refs[e];n.componentDidEnter&&n.componentDidEnter(),delete this.currentlyTransitioningKeys[e];var t=o(this.props.children||[]);t&&t.hasOwnProperty(e)||this.performLeave(e)},r.prototype._handleDoneLeaving=function(e){var n=this.refs[e];n.componentDidLeave&&n.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var r=o(this.props.children||[]);if(r&&r.hasOwnProperty(e))this.performEnter(e);else{var i=t({},this.state.children);delete i[e],this.setState({children:i})}},r.prototype.render=function(n){var t=this,r=n.childFactory,o=(n.transitionLeave,n.transitionName,n.transitionAppear,n.transitionEnter,n.transitionLeaveTimeout,n.transitionEnterTimeout,n.transitionAppearTimeout,n.component),i=a(n,["childFactory","transitionLeave","transitionName","transitionAppear","transitionEnter","transitionLeaveTimeout","transitionEnterTimeout","transitionAppearTimeout","component"]),s=[];for(var p in this.state.children)!function(n){if(t.state.children.hasOwnProperty(n)){var o=t.state.children[n];if(o){var i=function(e){return t.refs[n]=e},a=e.cloneVNode(r(o),{key:n,ref:i});s.push(a)}}}(p);return e.createVNode("string"==typeof o?2:16,o,i&&i.className,s,i)},r}(n);return h.defaultProps={component:"span",childFactory:f},h});